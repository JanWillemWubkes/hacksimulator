<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Commands Test - HackSimulator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            padding: 20px;
            margin: 0;
        }
        h1 {
            color: #0f0;
            font-size: 1.2em;
        }
        .test-section {
            margin: 20px 0;
            border: 1px solid #0f0;
            padding: 15px;
        }
        button {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 5px 15px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            margin: 5px;
        }
        button:hover {
            background: #0f0;
            color: #000;
        }
        .output {
            background: #000;
            border: 1px solid #0a0;
            padding: 10px;
            margin-top: 10px;
            white-space: pre-wrap;
            min-height: 50px;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            color: #0f0;
        }
        .error {
            color: #f00;
        }
    </style>
</head>
<body>
    <h1>üß™ Network Commands Test Suite</h1>
    <p>Testing all 6 network commands...</p>

    <div class="test-section">
        <h2>1. ping - Network connectivity</h2>
        <button onclick="testCommand('ping 8.8.8.8')">ping 8.8.8.8</button>
        <button onclick="testCommand('ping localhost')">ping localhost</button>
        <button onclick="testCommand('ping google.com')">ping google.com</button>
        <div class="output" id="output-ping"></div>
    </div>

    <div class="test-section">
        <h2>2. nmap - Port scanner</h2>
        <button onclick="testCommand('nmap 192.168.1.100')">nmap 192.168.1.100</button>
        <button onclick="testCommand('nmap localhost')">nmap localhost</button>
        <div class="output" id="output-nmap"></div>
    </div>

    <div class="test-section">
        <h2>3. ifconfig - Network interfaces</h2>
        <button onclick="testCommand('ifconfig')">ifconfig</button>
        <div class="output" id="output-ifconfig"></div>
    </div>

    <div class="test-section">
        <h2>4. netstat - Network connections</h2>
        <button onclick="testCommand('netstat')">netstat</button>
        <div class="output" id="output-netstat"></div>
    </div>

    <div class="test-section">
        <h2>5. whois - Domain lookup</h2>
        <button onclick="testCommand('whois google.com')">whois google.com</button>
        <button onclick="testCommand('whois github.com')">whois github.com</button>
        <button onclick="testCommand('whois hacksimulator.nl')">whois hacksimulator.nl</button>
        <div class="output" id="output-whois"></div>
    </div>

    <div class="test-section">
        <h2>6. traceroute - Network path</h2>
        <button onclick="testCommand('traceroute google.com')">traceroute google.com</button>
        <button onclick="testCommand('traceroute 8.8.8.8')">traceroute 8.8.8.8</button>
        <button onclick="testCommand('traceroute localhost')">traceroute localhost</button>
        <div class="output" id="output-traceroute"></div>
    </div>

    <div class="test-section">
        <h2>üìä Summary</h2>
        <button onclick="runAllTests()">Run All Tests</button>
        <div class="output" id="output-summary"></div>
    </div>

    <script type="module">
        import terminal from './src/core/terminal.js';
        import registry from './src/core/registry.js';

        // Import all network commands
        import pingCmd from './src/commands/network/ping.js';
        import nmapCmd from './src/commands/network/nmap.js';
        import ifconfigCmd from './src/commands/network/ifconfig.js';
        import netstatCmd from './src/commands/network/netstat.js';
        import whoisCmd from './src/commands/network/whois.js';
        import tracerouteCmd from './src/commands/network/traceroute.js';

        // Register commands
        registry.register('ping', pingCmd);
        registry.register('nmap', nmapCmd);
        registry.register('ifconfig', ifconfigCmd);
        registry.register('netstat', netstatCmd);
        registry.register('whois', whoisCmd);
        registry.register('traceroute', tracerouteCmd);

        console.log('Registered commands:', registry.list());

        // Test function
        window.testCommand = async function(commandStr) {
            const [cmdName] = commandStr.split(' ');
            const outputId = `output-${cmdName}`;
            const outputEl = document.getElementById(outputId);

            outputEl.textContent = `$ ${commandStr}\n\n`;

            try {
                const result = await terminal.executeCommand(commandStr);
                outputEl.innerHTML = `<span class="success">$ ${commandStr}\n\n${result}</span>`;
            } catch (error) {
                outputEl.innerHTML = `<span class="error">ERROR: ${error.message}</span>`;
            }
        };

        // Run all tests
        window.runAllTests = async function() {
            const summary = document.getElementById('output-summary');
            summary.textContent = 'Running all tests...\n\n';

            const tests = [
                'ping 8.8.8.8',
                'nmap 192.168.1.100',
                'ifconfig',
                'netstat',
                'whois google.com',
                'traceroute google.com'
            ];

            let passed = 0;
            let failed = 0;

            for (const test of tests) {
                try {
                    await terminal.executeCommand(test);
                    summary.textContent += `‚úÖ ${test}\n`;
                    passed++;
                } catch (error) {
                    summary.textContent += `‚ùå ${test}: ${error.message}\n`;
                    failed++;
                }
            }

            summary.textContent += `\nResults: ${passed} passed, ${failed} failed`;
        };

        console.log('Test page ready. Click buttons to test commands.');
    </script>
</body>
</html>
