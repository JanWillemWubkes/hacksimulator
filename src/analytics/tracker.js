const e="hacksim_analytics_consent",i={initialized:!1,consentGiven:!1,provider:null,init(t="ga4"){this.provider=t,this.consentGiven=this.checkConsent(),this.consentGiven&&this.initializeProvider(),this.initialized=!0},checkConsent(){try{const t=localStorage.getItem(e);if(!t)return!1;try{const n=JSON.parse(t);return!0===n.analytics}catch(i){return"true"===t}}catch(i){return console.warn("localStorage not available for consent tracking"),!1}},saveConsent(i){this.consentGiven=i;try{localStorage.setItem(e,i.toString()),localStorage.setItem("hacksim_consent_date",(new Date).toISOString())}catch(e){console.warn("Could not save consent to localStorage")}i&&!this.initialized?this.initializeProvider():!i&&this.initialized&&this.disableTracking()},initializeProvider(){"ga4"===this.provider?this.initGA4():"plausible"===this.provider&&this.initPlausible()},initGA4(){const e="G-7F792VS6CE",i=document.createElement("script");function t(){window.dataLayer.push(arguments)}i.async=!0,i.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=t,t("js",new Date),t("config",e,{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure",send_page_view:!0})},initPlausible(){const e=document.createElement("script");e.defer=!0,e.dataset.domain="hacksimulator.nl",e.src="https://plausible.io/js/script.js",document.head.appendChild(e)},disableTracking(){"ga4"===this.provider&&window.gtag&&(window["ga-disable-G-7F792VS6CE"]=!0)},trackEvent(e,i={}){this.consentGiven?((i.command_args||i.args||i.input)&&(console.warn("PRIVACY VIOLATION: Attempted to log command arguments!"),delete i.command_args,delete i.args,delete i.input),"ga4"===this.provider&&window.gtag?window.gtag("event",e,i):"plausible"===this.provider&&window.plausible&&window.plausible(e,{props:i})):void 0},trackPageView(e){this.consentGiven&&("ga4"===this.provider&&window.gtag?window.gtag("event","page_view",{page_title:e,page_location:window.location.href}):"plausible"===this.provider&&window.plausible&&window.plausible("pageview"))}};export default i;