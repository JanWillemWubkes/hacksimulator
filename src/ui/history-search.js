import t from"../core/history.js";export default new class{constructor(){this.isActive=!1,this.searchTerm="",this.matches=[],this.currentMatchIndex=0}start(){this.isActive=!0,this.searchTerm="",this.matches=[],this.currentMatchIndex=0}stop(){this.isActive=!1,this.searchTerm="",this.matches=[],this.currentMatchIndex=0}isSearchActive(){return this.isActive}updateSearch(e){if(this.searchTerm=e,e.trim()){const h=t.search(e);this.matches=h.reverse()}else this.matches=t.getAll().reverse();this.currentMatchIndex=0}getSearchTerm(){return this.searchTerm}getCurrentMatch(){return 0===this.matches.length?null:this.matches[this.currentMatchIndex]}nextMatch(){0!==this.matches.length&&(this.currentMatchIndex=(this.currentMatchIndex+1)%this.matches.length)}previousMatch(){0!==this.matches.length&&(this.currentMatchIndex=(this.currentMatchIndex-1+this.matches.length)%this.matches.length)}getMatchCount(){return this.matches.length}getCurrentMatchNumber(){return this.matches.length>0?this.currentMatchIndex+1:0}getPromptText(){const t=this.getCurrentMatch(),e=this.getCurrentMatchNumber(),h=this.getMatchCount();return 0===h?`(reverse-i-search)\`${this.searchTerm}': [geen matches]`:`(reverse-i-search)\`${this.searchTerm}' [${e}/${h}]: ${t||""}`}accept(){const t=this.getCurrentMatch();return this.stop(),t}cancel(){this.stop()}};