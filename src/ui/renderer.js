function t(t){const e=t.replace(/\t/g,"    ").match(/^(\s*)/)[1].length,n=t.trim();return e>=3&&n.length>0}export default new class{constructor(){this.outputElement=null,this.promptPrefix="hacker@hacksim:~$"}init(t){if(!t)throw new Error("Output element is required");this.outputElement=t}renderInput(t){const e=document.createElement("div");e.className="terminal-line terminal-input";const n=document.createElement("span");n.className="terminal-prompt",n.textContent=this.promptPrefix+" ";const r=document.createElement("span");r.textContent=t,e.appendChild(n),e.appendChild(r),this.outputElement.appendChild(e),this._scrollToBottom()}renderOutput(e,n="normal"){if(!e)return;const r=e.split("\n");let s=n;r.forEach(e=>{const r=e.trim();if("[SEPARATOR]"===r){const t=document.createElement("div");return t.className="welcome-separator",void this.outputElement.appendChild(t)}if(r.startsWith("[###]")){const t=document.createElement("div");return t.className="section-header",t.textContent=r,void this.outputElement.appendChild(t)}if(r.startsWith("[***]")){const t=document.createElement("div");return t.className="welcome-message",t.textContent=r,void this.outputElement.appendChild(t)}const i=document.createElement("div");let o=n;if(r.startsWith("[ ? ]")||r.startsWith("[ â†’ ]")?o="info":r.startsWith("[ ! ]")?o="warning":r.startsWith("[ âœ“ ]")?o="success":r.startsWith("[ X ]")?o="error":r.startsWith("ğŸ’¡")||r.startsWith("ğŸ¯")?o="info":r.startsWith("âš ï¸")||r.startsWith("ğŸ”’")?o="warning":r.startsWith("âœ…")?o="success":r.startsWith("âŒ")?o="error":t(e)&&(o=s),""!==r&&(s=o),i.className=`terminal-line terminal-output terminal-output-${o}`,t(e)){const t=function(t){const e=t.replace(/\t/g,"    ");return e.match(/^(\s*)/)[1].length}(e);i.dataset.indent=t}const a=this._formatText(e);i.innerHTML=a,this.outputElement.appendChild(i)}),this._scrollToBottom()}renderError(t){this.renderOutput(t,"error")}renderSuccess(t){this.renderOutput(t,"success")}renderWarning(t){this.renderOutput(t,"warning")}renderInfo(t){this.renderOutput(t,"info")}clear(){this.outputElement&&(this.outputElement.innerHTML="")}renderWelcome(t=null){if(t){const e=t.getWelcomeMessage();this.renderOutput(e,"info")}else{const t="\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“\nâ”ƒ                                            â”ƒ\nâ”ƒ  [***] HACKSIMULATOR.NL - MVP BETA        â”ƒ\nâ”ƒ                                            â”ƒ\nâ”ƒ  Leer ethisch hacken in een veilige       â”ƒ\nâ”ƒ  terminal                                  â”ƒ\nâ”ƒ                                            â”ƒ\nâ”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›\n\n[ ? ] TIP: Type 'help' om te beginnen.\n";this.renderOutput(t.trim(),"info")}}_formatText(t){let e=this._escapeHtml(t);return e=e.replace(/â†/g,'<span class="inline-arrow">â†</span>'),e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),e}_escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}_scrollToBottom(){this.outputElement&&(this.outputElement.scrollTop=this.outputElement.scrollHeight)}updatePrompt(t="~"){this.promptPrefix=`hacker@hacksim:${t}$`}getPrompt(){return this.promptPrefix}};