import e from"../../core/registry.js";import{lightBoxText as n}from"../../utils/asciiBox.js";import{BOX_CHARS as t,getResponsiveBoxWidth as o,smartTruncate as r,isMobileView as a,wordWrap as s}from"../../utils/box-utils.js";const i=t,c={system:"Deze tools helpen je de terminal te gebruiken en je huidige sessie te beheren.",filesystem:"Deze tools laten je bestanden en mappen organiseren, net als in een grafische verkenner.",network:"Deze tools scannen netwerken en verzamelen informatie over servers en open poorten.",security:"Deze tools testen de beveiliging van systemen - gebruik ze alleen ethisch!",special:"Speciale commands om de simulator te resetten of configureren."};function l(){const e=o()-2;return i.dividerLeft+i.horizontal.repeat(e)+i.dividerRight}function m(e,n,t){const a=n.length;let m="";return m+=function(e,n){const t=o(),r=` ${e.toUpperCase()} (${n}) `,a=t-2-r.length,s=Math.floor(a/2),c=a-s;return i.topLeft+i.horizontal.repeat(s)+r+i.horizontal.repeat(c)+i.topRight}(e,a)+"\n",m+=function(){const e=o(),n=` ${"COMMAND".padEnd(15)} DESCRIPTION`,t=e-2-n.length;return i.vertical+n+" ".repeat(t)+i.vertical}()+"\n",m+=l()+"\n",m+=function(e){const n=o()-2,t=c[e.toLowerCase()]||`Commands in de '${e}' categorie.`,r=s(t,n-2);let a="";return r.forEach(e=>{const t=` ${e}`.padEnd(n);a+=i.vertical+t+i.vertical+"\n"}),a+=l(),a}(e)+"\n",n.forEach(e=>{m+=function(e){const n=o()-2,t=n-15-2,a=` ${e.name.padEnd(15)} ${r(e.description,t)}`;return i.vertical+a.padEnd(n)+i.vertical}(e)+"\n"}),m+=function(){const e=o()-2;return i.bottomLeft+i.horizontal.repeat(e)+i.bottomRight}(),m}export default{name:"help",description:"Toon beschikbare commands",category:"system",usage:"help [category]",completionProvider:n=>e.getCategories(),execute(e,t,o){const r=o.terminal.getRegistry();if(a()){if(e.length>0){const n=e[0].toLowerCase(),t=r.getByCategory(n);if(0===t.length)return`Geen commands in '${n}'.\n\n[?] Type 'help' voor alle categorieën.`;let o=`\n**${n.toUpperCase()}** (${t.length})\n\n`;return t.forEach(e=>{o+=`  ${e.name} - ${e.description}\n`}),o}const n=r.getCategories(),t={};return n.forEach(e=>{t[e]=r.getByCategory(e)}),function(e){let n="\n**HELP**\n\n";return Object.entries(e).forEach(([e,t])=>{t.length>0&&(n+=`**${e.toUpperCase()}** (${t.length})\n`,t.forEach(e=>{n+=`  ${e.name} - ${e.description}\n`}),n+="\n")}),n+='[?] Type "man <command>" for details\n',n+="[!] Real hackers: start with SYSTEM & FILESYSTEM basics\n",n}(t)}if(e.length>0){const n=e[0].toLowerCase(),t=r.getByCategory(n);if(0===t.length)return`Geen commands gevonden in categorie '${n}'.\n\n[?] TIP: Type 'help' voor alle categorieën.`;let o=`Commands in categorie '${n}':\n\n`;return o+=m(n,t),o}const s=r.getCategories();let i="Beschikbare commands:\n\n";i+="[!] Real hackers beginnen met SYSTEM & FILESYSTEM basics, dan NETWORK scanning, en uiteindelijk SECURITY tools.\n\n",s.forEach(e=>{const n=r.getByCategory(e);n.length>0&&(i+=m(e,n)+"\n\n")});const c=n('• man <command> → Gedetailleerde uitleg van een tool\n• ↑↓ keys → Navigeer door command geschiedenis\n• Tab → Autocomplete (bijv. "nm" + Tab → "nmap")\n• shortcuts → Toon alle keyboard shortcuts',"TIP: NAVIGATIE & SHORTCUTS",60);return i+=c,i},manPage:"\nNAAM\n    help - toon beschikbare commands\n\nSYNOPSIS\n    help [CATEGORY]\n\nBESCHRIJVING\n    Toont een overzicht van alle beschikbare commands, gegroepeerd per\n    categorie. Optioneel kun je een specifieke categorie opvragen.\n\nARGUMENTEN\n    CATEGORY (optioneel)\n        Categorienaam: system, filesystem, network, security, special\n\nVOORBEELDEN\n    help\n        Toon alle commands\n\n    help filesystem\n        Toon alleen filesystem commands\n\nCATEGORIEËN\n    • system       → Basis terminal commands\n    • filesystem   → Bestanden en directories\n    • network      → Netwerk analyse tools\n    • security     → Security testing tools\n    • special      → Speciale commands (reset)\n\nGERELATEERDE COMMANDO'S\n    man <command> (gedetailleerde help voor specifiek command)\n".trim()};