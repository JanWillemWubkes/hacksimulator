import{getPathCompletions as e}from"../../utils/filesystem-completion.js";export default{name:"ls",category:"filesystem",description:"List directory contents",usage:"ls [options] [directory]",completionProvider(n){const t=n.length>0?n[n.length-1]:"";return e(t,{type:"both"})},async execute(e,n,t){const{vfs:r}=t,o=e[0]||r.getCwd(),i=n.a||n.all||!1,s=n.l||!1,a=n.la||n.al||!1;try{const e=r.listDirectory(o,i||a);return 0===e.length?"":s||a?function(e){const n=[];n.push("total "+e.length);for(const t of e){const e="directory"===t.type?"d":"-",r="restricted"===t.permissions?"r--------":"rw-r--r--",o="file"===t.type?"1024":"4096",i="Oct 14 12:00",s="directory"===t.type?t.name+"/":t.name;n.push(`${e}${r}  ${o.padStart(6)}  ${i}  ${s}`)}return n.push(""),n.push("[?] TIP: De eerste kolom toont type (d=directory, -=file) en permissies."),n.join("\n")}(e):function(e){const n=e.filter(e=>"directory"===e.type),t=e.filter(e=>"file"===e.type),r=[];return n.length>0&&r.push(n.map(e=>e.name+"/").join("  ")),t.length>0&&r.push(t.map(e=>e.name).join("  ")),r.join("  ")}(e)}catch(n){return n.message.includes("No such directory")?`ls: cannot access '${e[0]}': No such file or directory\n\n[?] TIP: Gebruik 'pwd' om te zien waar je bent, en 'cd' om van directory te veranderen.`:n.message.includes("Not a directory")?`ls: ${e[0]}: Not a directory\n\n[?] TIP: ls werkt alleen op directories. Gebruik 'cat ${e[0]}' om een bestand te lezen.`:`ls: ${n.message}`}},manPage:"\nNAAM\n    ls - list directory contents\n\nSYNOPSIS\n    ls [OPTIONS] [DIRECTORY]\n\nBESCHRIJVING\n    List informatie over bestanden en directories. Standaard wordt de huidige\n    directory getoond.\n\nOPTIES\n    -a, --all\n        Toon ook verborgen bestanden (bestanden die beginnen met .)\n\n    -l\n        Gebruik een lang formaat met extra details (permissions, size, date)\n\nVOORBEELDEN\n    ls\n        Toon bestanden in de huidige directory\n\n    ls /etc\n        Toon bestanden in de /etc directory\n\n    ls -a\n        Toon alle bestanden, inclusief verborgen bestanden\n\n    ls -l\n        Toon gedetailleerde informatie over bestanden\n\n    ls -la ~\n        Toon alle bestanden in je home directory met details\n\nEDUCATIEVE TIPS\n    [?] Verborgen bestanden beginnen met een punt (.) en worden vaak gebruikt\n       voor configuratie (bijv. .ssh/, .bashrc)\n\n    [DIR] Directories worden gemarkeerd met een / aan het einde\n\n    [!] De permissies kolom toont wie het bestand kan lezen/schrijven/uitvoeren\n\nGERELATEERDE COMMANDO'S\n    cd, pwd, cat, find\n".trim()};