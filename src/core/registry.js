export default new class{constructor(){this.commands=new Map}register(e,t){if(!e||"string"!=typeof e)throw new Error("Command name must be a non-empty string");if(!t||"function"!=typeof t.execute)throw new Error("Command handler must have an execute function");const r={execute:t.execute,description:t.description||"No description available",category:t.category||"other",usage:t.usage||e,manPage:t.manPage||null,completionProvider:t.completionProvider||null};this.commands.set(e.toLowerCase(),r)}unregister(e){return this.commands.delete(e.toLowerCase())}get(e){return this.commands.get(e.toLowerCase())||null}has(e){return this.commands.has(e.toLowerCase())}list(){return Array.from(this.commands.keys()).sort()}getByCategory(e){const t=[];for(const[r,o]of this.commands.entries())o.category===e&&t.push({name:r,description:o.description,usage:o.usage});return t.sort((e,t)=>e.name.localeCompare(t.name))}getCategories(){const e=new Set;for(const t of this.commands.values())e.add(t.category);return Array.from(e).sort()}getCompletions(e,t=[]){const r=this.get(e);if(!r||!r.completionProvider)return[];try{const e=r.completionProvider(t);return Array.isArray(e)?e:[]}catch(t){return console.error(`Error getting completions for '${e}':`,t),[]}}async execute(e,t,r,o){const n=this.get(e);if(!n)return`Command not found: ${e}\n\n[ ? ] TIP: Type 'help' voor een lijst van beschikbare commands.`;try{return await n.execute(t,r,o)||""}catch(t){return console.error(`Error executing command '${e}':`,t),`Error: ${t.message}\n\n[ ? ] TIP: Type 'man ${e}' voor meer informatie over dit commando.`}}clear(){this.commands.clear()}getStats(){const e={};for(const t of this.commands.values())e[t.category]=(e[t.category]||0)+1;return{total:this.commands.size,categories:e}}};